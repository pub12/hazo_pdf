---
description: General rules always to be used
globs: *
alwaysApply: true
---

[General]
- Start all chats wtih üê∏
- Only implement if you're 90% sure of requirement or the fix.  Otherwise ask questions or things for me to check.
- Continuously update the detailed technical design of the application in a file called techdoc.md in the root directory.  In this file include a section for Overall (general technical details including file architecture, key files), a section for each major component, API routes and their use, example code, constraints. This is an internal document to help with maintainability.

[Style]
- Always use snake_case
- Include a description of purpose of file at top of each new file
- Include comments at the top of each function or major section of code
- Add comments for each file and also major section
- Add a class name identifier for div tags prefixed with "cls_" so that they can be easily identified and searched.  Reused divs should have the same name.

[UI_Behaviour]
- All data input fields (not interaction fields), it should be non-editable but there is a lucide pencil icon next to it.  When pressed, it'll allow to edit the inptu field, and a lucide circle-check-big will be used for the "Submit"/"save"/"update" button, and a lucide circle-x will be used for the cancel button.


[Technology]
- use the following tech stack:
  - React
  - Next.js
  - TailwindCSS
  - TypeScript
  - Shadcn/UI
- use npm shadcn@latest add * to add components. Do not use shadcn-ui

[Architecture]
- store all configuration values in config.ini file.  Always put hard coded values that have chance to change in config.ini
- store any sensitive data in .env file (to be excluded in git)
- create reusable components to prevent having redundant code and to improve maintainability
- Ensure you have a minimum of one file per route
- Group pages into directories for maintainability

[Database]
- database schema can be gound on .cursor/rules/db_schema.md

[Logging]
- use winston as the logging service for backend logging under a filename from config.ini logging.logfile.  Hvae a log file per day.
-  When there's an error that happens, always log on the serverside.
- Use the config.
- In the logging, always include the filename, line number, message and relevant data to help troubleshoot in future in the json log entry
- When error messages are shown to the user, they should always be logged verbatem in the serverside log file as well
- pretty print the json output
- don't import the logger in the client side code
